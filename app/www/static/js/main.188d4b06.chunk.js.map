{"version":3,"sources":["pages/Page.js","components/Component.js","components/DatetimeRangePicker.js","store.js","reducer.js","actions.js","axios.js","pages/Dashboard.js","components/Navbar.js","App.js","reportWebVitals.js","index.js"],"names":["Page","a","this","_componentDidMount","window","scrollTo","className","_render","args","___state_update_locks___","Queue","___state_update_in_progress","onChangeHandlerGenerator","bind","setInputValue","Promise","resolve","enqueue","___process_next_update___","peek","dequeue","object","___lock_state_update___","newState","state","setState","___unlock_state_update___","name","value","values","updateState","arg","target","componentInstance","React","Component","gridItemStyle","css","margin","fontSize","background","color","border","width","boxShadow","padding","textAlign","cursor","DatetimeRangePicker","updateFrom","updateTo","props","onChange","from","to","updateParent","Date","Grid","container","style","fontFamily","item","xs","sm","placeholder","selected","createStore","action","type","payload","data","updateDataReducer","axios","get","response","store","dispatch","actions","fetchData","require","location","href","indexOf","interceptors","request","use","config","url","twoDigits","d","toString","Dashboard","fetchDataTimer","setInterval","clearInterval","water_level_percentage","water_level","paddingTop","TankLevel","level","Divider","SystemData","connect","display","marginBottom","height","Row","label","TableRow","TableCell","outflow_rate","inflow_rate","leakage","level_data","Table","TableBody","History","fromTimeStamp","getTime","toTimeStamp","datasets","labels","onRangeChange","alert","temp","prepareDataForChart","console","log","waterLevelDataset","backgroundColor","borderColor","lineTension","inflowRateDataset","outflowRateDataset","forEach","datum","created_at","push","timestamp","date","year","getFullYear","month","getMonth","day","getDay","m","getMinutes","s","getSeconds","h","getHours","formatDate","setNavbarDimensions","navbarHeight","document","getElementById","offsetHeight","documentElement","setProperty","Navbar","addEventListener","AppBar","position","id","Chart","register","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","App","router","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.188d4b06.chunk.js","sourcesContent":["\n\nimport Component from '../components/Component';\n\n\nclass Page extends Component {\n\n\t_componentDidMount() {\n\n\t}\n\n\tasync componentDidMount() {\n\t\tawait this._componentDidMount();\n\t\twindow.scrollTo(0, 0);\n\t}\n\n\t_render() {\n\t\treturn <h1>Please implement <code>_render()</code></h1>\n\t}\n\n\trender() {\n\t\treturn <div className=\"page\">\n\t\t\t{this._render()}\n\t\t</div>\n\t}\n\n}\n\nexport default Page;","\nimport React from 'react';\nimport Queue from 'queue-fifo';\n\n\n\nclass Component extends React.Component {\n\n\n\tconstructor(...args) {\n\n\t\tsuper(...args);\n\n\t\tthis.onChangeHandlerGenerator.bind(this);\n\t\tthis.setInputValue = this.setInputValue.bind(this)\n\t}\n\n\n\t___state_update_locks___ = new Queue();\n\t___state_update_in_progress = false;\n\n\n\t___lock_state_update___() {\n\n\t\treturn new Promise(resolve => {\n\n\t\t\tconst queue = this.___state_update_locks___;\n\t\t\tqueue.enqueue(resolve);\n\n\t\t\tif (!this.___state_update_in_progress) {\n\t\t\t\tthis.___state_update_in_progress = true;\n\t\t\t\tthis.___process_next_update___();\n\t\t\t}\n\t\t\t\n\t\t});\n\n\t}\n\n\n\t___process_next_update___() {\n\n\t\tconst resolve = this.___state_update_locks___.peek();\n\n\t\tif (!resolve) {\n\t\t\tthis.___state_update_in_progress = false;\n\t\t\treturn;\n\t\t}\n\n\t\tresolve();\n\n\t}\n\n\t___unlock_state_update___() {\n\t\tthis.___state_update_locks___.dequeue(); // remove my lock;\n\t\tthis.___process_next_update___();\n\t}\n\n\t\n\n\tasync updateState(object) {\n\t\tawait this.___lock_state_update___();\n\t\tconst newState = { ...(this.state || {} ), ...object };\n\t\tawait this.setState(newState);\n\t\tthis.___unlock_state_update___();\n\t}\n\n\tasync setInputValue(name, value) {\n\t\tconst values = this.state.values;\n\t\tvalues[name] = value;\n\t\tawait this.updateState({ values })\n\t}\n\n\tonChangeHandlerGenerator(name) {\n\n\t\treturn (function(arg) {\n\n\t\t\tlet value;\n\n\t\t\tif (typeof arg == 'object')\n\t\t\t\tvalue = arg.target.value;\n\t\t\telse\n\t\t\t\tvalue = arg;\n\n\t\t\tconst values = (this.componentInstance.state || {} ).values || {};\n\t\t\tvalues[this.name] = value;\n\n\t\t\tthis.componentInstance.updateState({ values });\n\n\t\t}).bind({ componentInstance: this, name });\n\t}\n\n\trender() {\n\t\treturn <p>\n\t\t\tPlease implement <code>render()</code>\n\t\t</p>\n\t}\n}\n\n\nexport default Component;","\n\nimport Grid from '@mui/material/Grid';\nimport Component from '@xavisoft/react-component';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { css } from '@emotion/css';\n\n\nconst gridItemStyle = css({\n\t'--side-margin': '10px',\n\t'& b': {\n\t\tmargin: '0 var(--side-margin)',\n\t\tfontSize: 25\n\t},\n\t'& input': {\n\t\tbackground: 'grey',\n\t\tcolor: 'white',\n\t\tborder: 'none',\n\t\tmargin: '0 var(--side-margin)',\n\t\twidth: 'calc(100% - 2 * var(--side-margin))',\n\t\tboxShadow: '0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2)',\n\t\tpadding: '5px 0',\n\t\ttextAlign: 'center',\n\t\tcursor: 'pointer'\n\t}\n});\n\n\nclass DatetimeRangePicker extends Component {\n\n\n\tstate = {\n\t\tvalues: {}\n\t}\n\n\n\tconstructor(...args) {\n\n\t\tsuper(...args);\n\n\t\tthis.updateFrom = this.updateFrom.bind(this);\n\t\tthis.updateTo = this.updateTo.bind(this);\n\n\t}\n\n\n\tupdateParent() {\n\n\t\tif (!this.props.onChange) \n\t\t\treturn;\n\n\t\tconst { values } = this.state;\n\t\tconst { from=this.props.from, to=this.props.to } = values;\n\t\tthis.props.onChange({ from , to });\n\n\t}\n\n\n\tasync updateFrom(from) {\n\n\t\tconst values = { ...this.state.values, from };\n\t\tawait this.updateState({ values });\n\t\tthis.updateParent();\n\t}\n\n\tasync updateTo(to) {\n\n\t\tconst values = { ...this.state.values, to };\n\t\tawait this.updateState({ values });\n\t\tthis.updateParent();\n\t}\n\n\trender() {\n\n\t\tconst {\n\t\t\tfrom=this.state.values.from || new Date(),\n\t\t\tto=this.state.values.to || new Date(),\n\t\t} = this.props;\n\n\t\treturn <div>\n\t\t\t<Grid container style={{ fontFamily: 'Arial' }}>\n\n\t\t\t\t<Grid item xs={6} sm={6} className={gridItemStyle}>\n\n\t\t\t\t\t<b>FROM</b>\n\n\t\t\t\t\t<br />\n\t\t\t\t\t<DatePicker placeholder=\"From\" selected={from} onChange={this.updateFrom} />\n\t\t\t\t</Grid>\n\n\t\t\t\t<Grid item xs={6} sm={6} className={gridItemStyle}>\n\n\t\t\t\t\t<b>TO</b>\n\t\t\t\t\t<br />\n\n\t\t\t\t\t<DatePicker placeholder=\"To\" selected={to} onChange={this.updateTo} />\n\t\t\t\t</Grid>\n\n\t\t\t</Grid>\n\n\t\t</div>\n\n\t}\n}\n\n\nexport default DatetimeRangePicker;","\nimport { createStore } from 'redux';\nimport reducer from './reducer';\n\nconst initialStore = {};\n\nexport default createStore(reducer, initialStore);","\n\nfunction updateDataReducer(state, payload) {\n\n\tconst data = { ...state.data, ...payload };\n\treturn { ...state, data };\n}\n\n\n\nexport default function reducer(state, action) {\n\n\tconst { type, payload } = action;\n\n\tswitch (type) {\n\n\t\tcase 'update-data':\n\t\t\treturn updateDataReducer(state, payload);\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n\n}","\n\nimport store from './store';\nimport axios from 'axios';\n\n\nasync function fetchData() {\n\n\tconst response = await axios.get('/api/system-data');\n\tconst { data } = response;\n\n\tconst action = {\n\t\ttype: 'update-data',\n\t\tpayload: data\n\t}\n\n\tstore.dispatch(action);\n\n}\n\n\nconst actions = {\n\tfetchData\n}\n\nexport default actions;","\n\nconst axios = require('axios');\n\n\n\nfunction injectDomain(config) {\n\tconfig.url = 'https://water-management.herokuapp.com' + config.url;\n\treturn config;\n}\n\n\nif (window.location.href.indexOf('file://') === 0)\n\taxios.interceptors.request.use(injectDomain);\n\n// axios.interceptors.request.use(injectDomain);\n\nexport default axios;","\nimport Page from './Page';\nimport Component from '@xavisoft/react-component';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableRow from '@mui/material/TableRow';\nimport TableCell from '@mui/material/TableCell';\nimport DatetimeRangePicker from '../components/DatetimeRangePicker';\nimport { connect } from 'react-redux';\nimport actions from '../actions';\nimport axios from '../axios';\nimport { Line } from \"react-chartjs-2\";\nimport Divider from '@mui/material/Divider';\n\n\n// format\nfunction twoDigits(d) {\n\n\tif (d < 10)\n\t\treturn '0' + d;\n\n\treturn d.toString();\n\n}\n\nfunction formatDate(timestamp) {\n\n\tconst date = new Date(timestamp);\n\n\tconst year = date.getFullYear();\n\tconst month = date.getMonth();\n\tconst day = date.getDay();\n\n\tconst m = twoDigits(date.getMinutes());\n\tconst s = twoDigits(date.getSeconds());\n\tconst h = twoDigits(date.getHours());\n\n\treturn `${year}-${month}-${day}@${h}:${m}:${s}`;\n}\n\n\nclass Dashboard extends Page {\n\n\n\t_componentDidMount() {\n\n\t\tthis.fetchDataTimer = setInterval(this.fetchData.bind(this), 3000);\n\t\tthis.fetchData();\n\t}\n\n\n\tfetchData() {\n\t\tactions.fetchData();\n\t}\n\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.fetchDataTimer);\n\t}\n\n\n\n\t_render() {\n\n\t\tconst data = this.props.data;\n\t\tconst { water_level } = data;\n\t\tconst water_level_percentage = water_level / 2000 * 100;\n\n\t\treturn <>\n\t\t\t<div style={{ paddingTop: 'var(--navbar-height)' }}>\n\n\n\t\t\t\t<TankLevel level={water_level_percentage} />\n\n\t\t\t\t<Divider />\n\n\t\t\t\t<SystemData data={{ ...data, water_level_percentage }} />\n\n\t\t\t\t<History />\n\n\t\t\t</div>\n\n\t\t</>\n\t}\n}\n\n\nfunction mapStateToProps(state) {\n\tconst { data={} } = state;\n\treturn { data };\n}\n\n\nexport default connect(mapStateToProps)(Dashboard);\n\n\nfunction TankLevel({ level }) {\n\n\treturn <div\n\t\tstyle={{\n\t\t\tmargin: 20\n\t\t}}\n\t>\n\t\t<span\n\t\t\tstyle={{\n\t\t\t\tdisplay: 'block',\n\t\t\t\ttextAlign: 'center',\n\t\t\t\tcolor:'grey',\n\t\t\t\tfontSize: 30,\n\t\t\t\tmarginBottom: 20\n\t\t\t}}\n\t\t>\n\t\t\tTank Level ({level}%)\n\t\t</span>\n\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tborder: '1px solid #ccc',\n\t\t\t\tpadding: 0,\n\t\t\t\theight: 30\n\t\t\t}}\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tbackground: 'var(--secondary-color)',\n\t\t\t\t\theight: 30,\n\t\t\t\t\tdisplay: 'inline-block',\n\t\t\t\t\twidth: `${level}%`,\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tpadding: 0\n\t\t\t\t}} \n\t\t\t/>\n\t\t</div>\n\t</div>\n}\n\n\n\nfunction Row({ data, label }) {\n\n\treturn <TableRow>\n\n\t\t<TableCell>\n\t\t\t<b>{label}</b>\n\t\t</TableCell>\n\n\t\t<TableCell>{data}</TableCell>\n\t</TableRow>\n}\n\n\nfunction SystemData(props) {\n\n\tconst { data } = props;\n\tconst { outflow_rate, inflow_rate, leakage, water_level, water_level_percentage } = data;\n\n\tconst level_data = `${water_level} litres (${water_level_percentage}%)`;\n\n\n\treturn <Table>\n\n\t\t<TableBody>\n\t\t\t<Row label=\"Level\" data={level_data} />\n\t\t\t<Row label=\"Outflow rate\" data={outflow_rate} />\n\t\t\t<Row label=\"Inflow rate\" data={inflow_rate} />\n\t\t\t<Row label=\"Leakage\" data={ leakage ? 'YES' : 'NO' } />\t\t\t\n\t\t</TableBody>\n\n\t</Table>\n}\n\n\n\nclass History extends Component {\n\n\tstate = {\n\t\tfrom: (new Date()),\n\t\tto: (new Date()),\n\t\tfromTimeStamp: (new Date()).getTime(),\n\t\ttoTimeStamp: (new Date()).getTime() + 24 * 3600 * 1000 + 1,\n\t\tdata: {\n\t\t\tdatasets: [],\n\t\t\tlabels: []\n\t\t}\n\t}\n\n\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.onRangeChange = this.onRangeChange.bind(this);\n\t}\n\n\n\tasync onRangeChange(values) {\n\n\n\t\tlet { from, to } = values;;\n\n\n\t\tfrom = (new Date(from)).getTime();\n\t\tto = (new Date(to)).getTime();\n\n\t\tif (from === to)\n\t\t\treturn alert('Invalid range.');\n\n\t\tif (from > to) {\n\t\t\tconst temp = from;\n\t\t\tfrom = to;\n\t\t\tto = temp;\n\t\t}\n\n\t\tconst toTimeStamp = to + 24 * 3600 * 1000 - 1;\n\t\tconst fromTimeStamp = from;\n\n\t\tawait this.updateState({ from, to, toTimeStamp, fromTimeStamp });\n\t\tawait this.fetchData();\n\n\t}\n\n\n\tasync fetchData() {\n\t\tconst { fromTimeStamp:from, toTimeStamp:to } = this.state;\n\n\t\ttry {\n\n\t\t\tconst response = await axios.get(`/api/system-data/history?from=${from}&to=${to}`);\n\t\t\tconst data =  this.prepareDataForChart(response.data);\n\n\t\t\tawait this.updateState({ data });\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\n\t\t\tconst { response } = err;\n\t\t\tconsole.log(response);\n\n\t\t\talert('Something bad happened.');\n\t\t}\n\n\t}\n\n\n\tprepareDataForChart(data) {\n\n\t\tconst waterLevelDataset = {\n\t\t\tdata: [],\n\t\t\tlabel: 'Water Level',\n\t\t\tbackgroundColor: 'green',\n\t\t\tborderColor: 'green',\n\t\t\tlineTension: 0.4\n\t\t};\n\n\t\tconst inflowRateDataset = {\n\t\t\tdata: [],\n\t\t\tlabel: 'Inflow rate',\n\t\t\tbackgroundColor: 'blue',\n\t\t\tborderColor: 'blue',\n\t\t\tlineTension: 0.4\n\t\t};\n\n\t\tconst outflowRateDataset = {\n\t\t\tdata: [],\n\t\t\tlabel: 'Outflow Rate',\n\t\t\tbackgroundColor: 'red',\n\t\t\tborderColor: 'red',\n\t\t\tlineTension: 0.4\n\t\t};\n\n\n\t\tconst labels = [];\n\t\tconst datasets = [ waterLevelDataset, outflowRateDataset, inflowRateDataset ];\n\n\t\tconsole.log(data);\n\n\t\tdata.forEach(datum => {\n\n\t\t\tconst { water_level, created_at, inflow_rate, outflow_rate } = datum;\n\t\t\tlabels.push(formatDate(created_at));\n\n\t\t\tconsole.log(created_at);\n\n\t\t\toutflowRateDataset.data.push(outflow_rate);\n\t\t\twaterLevelDataset.data.push(water_level);\n\t\t\tinflowRateDataset.data.push(inflow_rate);\n\t\t\t\n\t\t});\n\n\n\t\treturn {\n\t\t\tdatasets,\n\t\t\tlabels\n\t\t}\n\t}\n\n\n\tcomponentDidMount() {\n\t\tthis.fetchData();\n\t}\n\n\n\n\trender() {\n\n\t\treturn <>\n\n\t\t\t<div style={{ margin: '20px 0' }}>\n\t\t\t\t<DatetimeRangePicker onChange={this.onRangeChange} from={this.state.from} to={this.state.to}/>\n\t\t\t</div>\n\n\t\t\t<Line data={this.state.data} />\n\t\t</>\n\t}\n}","\n\nimport AppBar from '@mui/material/AppBar';\nimport Component from '@xavisoft/react-component';\nimport WaterIcon from '@mui/icons-material/Opacity';\n\n\n\nfunction setNavbarDimensions() {\n\tconst navbarHeight = document.getElementById('appbar').offsetHeight + 'px'\n\tdocument.documentElement.style.setProperty('--navbar-height', navbarHeight);\n}\n\nclass Navbar extends Component {\n\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('resize', setNavbarDimensions);\n\t\tsetNavbarDimensions();\n\n\t}\n\n\trender() {\n\n\t\treturn <AppBar style={{ padding: 10, position: 'fixed' }} id=\"appbar\">\n\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t<WaterIcon fontSize=\"large\" className=\"rotate\" />\n\t\t\t</div>\n\t\t</AppBar>\n\t}\n}\n\nexport default Navbar;","\nimport AppWrapper, { Route } from '@xavisoft/app-wrapper';\nimport Dashboard from './pages/Dashboard';\nimport Navbar from './components/Navbar';\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nimport './App.css';\n\n\nimport {\n  Chart,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\n\nChart.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\n\n\nfunction App() {\n\treturn (\n\t\t\n\t\t<Provider store={store}>\n\n\n\n\t\t\t<Navbar />\n\n\t\t\t<AppWrapper router=\"hash\">\n\n\t\t\t\t<Route path=\"/\" component={Dashboard} />\n\t\t\t</AppWrapper>\n\t\t</Provider>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}